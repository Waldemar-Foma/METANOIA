{% extends "base.html" %}

{% block title %}Обучение VR-терапии{% endblock %}

{% block content %}
<div class="training-container">
    <div class="training-header">
        <h1><i class="fas fa-graduation-cap"></i> Обучение VR-терапии ПТСР</h1>
        <p>Программа подготовки терапевтов для работы с системой виртуальной реальности</p>
    </div>

    <div class="training-progress">
        <div class="progress-steps">
            <div class="step active">
                <div class="step-number">1</div>
                <div class="step-label">Теория</div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-label">Тестирование</div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Лицензия</div>
            </div>
        </div>
    </div>

    <div class="grid grid-2">
        <!-- Теоретические материалы -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-book"></i> Теоретическая подготовка
                </h3>
            </div>
            <div class="training-content">
                <div class="theory-section">
                    <h4>Основы VR-терапии ПТСР</h4>
                    <p>Виртуальная реальность позволяет создавать контролируемые среды для экспозиционной терапии, что значительно повышает эффективность лечения посттравматического стрессового расстройства.</p>
                    
                    <div class="key-points">
                        <div class="point">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <strong>Безопасная среда</strong>
                                <p>Полный контроль над интенсивностью стимулов</p>
                            </div>
                        </div>
                        <div class="point">
                            <i class="fas fa-sliders-h"></i>
                            <div>
                                <strong>Гибкая настройка</strong>
                                <p>Возможность тонкой настройки параметров экспозиции</p>
                            </div>
                        </div>
                        <div class="point">
                            <i class="fas fa-chart-line"></i>
                            <div>
                                <strong>Мониторинг прогресса</strong>
                                <p>Детальная аналитика и отслеживание динамики SUD</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="theory-section">
                    <h4>Модули системы</h4>
                    <div class="modules-grid">
                        <div class="module-card">
                            <div class="module-icon">
                                <i class="fas fa-mountain"></i>
                            </div>
                            <h5>360° Экспозиция</h5>
                            <p>Контролируемое погружение в травмирующие ситуации с настраиваемой интенсивностью</p>
                        </div>
                        <div class="module-card">
                            <div class="module-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <h5>EMDR терапия</h5>
                            <p>Десенсибилизация и переработка движением глаз (1-4 Гц)</p>
                        </div>
                        <div class="module-card">
                            <div class="module-icon">
                                <i class="fas fa-umbrella-beach"></i>
                            </div>
                            <h5>Безопасное место</h5>
                            <p>Техники релаксации и заземления в умиротворяющей обстановке</p>
                        </div>
                    </div>
                </div>

                <div class="theory-section">
                    <h4>Экстренные ситуации</h4>
                    <div class="emergency-protocols">
                        <div class="protocol">
                            <h5>Резкое повышение SUD</h5>
                            <p><strong>Действие:</strong> Немедленный переход к модулю "Безопасное место"</p>
                            <p><strong>Цель:</strong> Стабилизация состояния пациента</p>
                        </div>
                        <div class="protocol">
                            <h5>Технические сбои</h5>
                            <p><strong>Действие:</strong> Использование кнопки экстренной остановки</p>
                            <p><strong>Цель:</strong> Мгновенное прекращение всех стимулов</p>
                        </div>
                        <div class="protocol">
                            <h5>Паническая атака</h5>
                            <p><strong>Действие:</strong> Применение техник дыхания 4-7-8</p>
                            <p><strong>Цель:</strong> Нормализация дыхательного ритма</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Практическая информация -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-tasks"></i> Практические аспекты
                </h3>
            </div>
            <div class="training-content">
                <div class="practice-section">
                    <h4>Протокол сессии</h4>
                    <ol class="session-protocol">
                        <li>
                            <strong>Предварительная оценка</strong>
                            <p>Определение начального уровня SUD (0-10)</p>
                        </li>
                        <li>
                            <strong>Настройка параметров</strong>
                            <p>Выбор интенсивности звука, визуальных эффектов</p>
                        </li>
                        <li>
                            <strong>Проведение экспозиции</strong>
                            <p>Контролируемое погружение с мониторингом состояния</p>
                        </li>
                        <li>
                            <strong>Переход к терапии</strong>
                            <p>При необходимости - EMDR или безопасное место</p>
                        </li>
                        <li>
                            <strong>Завершающая оценка</strong>
                            <p>Фиксация конечного уровня SUD и анализ прогресса</p>
                        </li>
                    </ol>
                </div>

                <div class="practice-section">
                    <h4>Техника безопасности</h4>
                    <div class="safety-rules">
                        <div class="rule">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div>
                                <strong>Всегда оставайтесь рядом</strong>
                                <p>Не оставляйте пациента без наблюдения во время VR-сессии</p>
                            </div>
                        </div>
                        <div class="rule">
                            <i class="fas fa-pause"></i>
                            <div>
                                <strong>Знайте кнопки управления</strong>
                                <p>Пауза и экстренная остановка должны быть всегда доступны</p>
                            </div>
                        </div>
                        <div class="rule">
                            <i class="fas fa-comment-medical"></i>
                            <div>
                                <strong>Поддерживайте вербальный контакт</strong>
                                <p>Регулярно проверяйте состояние пациента</p>
                            </div>
                        </div>
                        <div class="rule">
                            <i class="fas fa-file-medical"></i>
                            <div>
                                <strong>Ведите документацию</strong>
                                <p>Фиксируйте все параметры сессии и изменения SUD</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="practice-section">
                    <h4>Требования к тестированию</h4>
                    <div class="test-requirements">
                        <div class="requirement">
                            <i class="fas fa-check-circle"></i>
                            <span>Минимальный проходной балл: 80%</span>
                        </div>
                        <div class="requirement">
                            <i class="fas fa-clock"></i>
                            <span>Время на тест: не ограничено</span>
                        </div>
                        <div class="requirement">
                            <i class="fas fa-redo"></i>
                            <span>Повторная попытка: через 24 часа</span>
                        </div>
                        <div class="requirement">
                            <i class="fas fa-certificate"></i>
                            <span>Лицензия действует: 1 год</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Призыв к действию -->
    <div class="card training-cta">
        <div class="cta-content">
            <div class="cta-text">
                <h3>Готовы к тестированию?</h3>
                <p>Проверьте свои знания и получите лицензию на работу с системой VR-терапии</p>
            </div>
            <div class="cta-actions">
                <a href="{{ url_for('therapist_test') }}" class="btn btn-primary btn-lg">
                    <i class="fas fa-play-circle"></i> Начать тестирование
                </a>
                <a href="{{ url_for('help_page') }}" class="btn btn-outline">
                    <i class="fas fa-question-circle"></i> Нужна помощь?
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.training-header {
    text-align: center;
    margin-bottom: 2rem;
}

.training-header h1 {
    color: var(--dark);
    margin-bottom: 0.5rem;
}

.training-progress {
    margin-bottom: 2rem;
}

.progress-steps {
    display: flex;
    justify-content: center;
    gap: 2rem;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--border);
    color: var(--secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

.step.active .step-number {
    background: var(--primary);
    color: white;
}

.step-label {
    font-size: 0.875rem;
    color: var(--secondary);
}

.step.active .step-label {
    color: var(--primary);
    font-weight: 600;
}

.training-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.theory-section h4 {
    color: var(--dark);
    margin-bottom: 1rem;
    border-bottom: 2px solid var(--primary);
    padding-bottom: 0.5rem;
}

.key-points {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.point {
    display: flex;
    align-items: start;
    gap: 1rem;
    padding: 1rem;
    background: var(--light);
    border-radius: 8px;
}

.point i {
    color: var(--primary);
    font-size: 1.25rem;
    margin-top: 0.25rem;
}

.modules-grid {
    display: grid;
    gap: 1rem;
}

.module-card {
    padding: 1.5rem;
    border: 1px solid var(--border);
    border-radius: 8px;
    text-align: center;
}

.module-icon {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: 1rem;
}

.module-card h5 {
    margin-bottom: 0.5rem;
    color: var(--dark);
}

.emergency-protocols {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.protocol {
    padding: 1rem;
    background: #fef3c7;
    border-radius: 8px;
    border-left: 4px solid var(--warning);
}

.protocol h5 {
    color: #92400e;
    margin-bottom: 0.5rem;
}

.session-protocol {
    padding-left: 1.5rem;
}

.session-protocol li {
    margin-bottom: 1.5rem;
    padding-left: 0.5rem;
}

.session-protocol strong {
    color: var(--dark);
    display: block;
    margin-bottom: 0.25rem;
}

.safety-rules {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.rule {
    display: flex;
    align-items: start;
    gap: 1rem;
    padding: 1rem;
    background: #dbeafe;
    border-radius: 8px;
}

.rule i {
    color: var(--primary);
    font-size: 1.25rem;
    margin-top: 0.25rem;
}

.test-requirements {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.requirement {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.requirement i {
    color: var(--success);
}

.training-cta {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border: none;
}

.cta-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cta-text h3 {
    margin-bottom: 0.5rem;
}

.cta-actions {
    display: flex;
    gap: 1rem;
}

.btn-lg {
    padding: 1rem 2rem;
    font-size: 1.125rem;
}

@media (max-width: 768px) {
    .progress-steps {
        gap: 1rem;
    }
    
    .cta-content {
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
    }
    
    .cta-actions {
        flex-direction: column;
    }
}
</style>
{% endblock %}